---
title: "Advance R Programming"
author: "SUYOG TIMALSINA"
output: html_document
date: "2025-02-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 1. Built-in R Feature and Functions
```{r }
# seq() : Create sequence
seqA <- seq(0,10, by = 2)
seqA

#sort() : sort a vector
v <- c(1111,22,3,4,5,6,998,98,55)
sort(v)

sort(v, decreasing = TRUE)

# rev() : Reverse elements in object
rev(v)

#as.: Converting the data type
as.list(v)

as.matrix(v)
```

# 2. Apply
* `sapply` is used to do list and function. The result is always a list.
* `lapply` works on both vectors and lists.It simplifies the result. If the result of applying the function is a single value for each element, it will return a vector instead of a list.
```{r}
v <- c(1,2,3,4,5)
addrand <- function(x) {
  ran <- sample(1:100,1)
  return(x + ran)
}

result <- lapply(v,addrand)
result

v1 <- 1:5

times2 <- function(num) {
  return(num * 2)
}
print(v)
result <- sapply(v1, times2)
result
```

*Anonymous Functions
```{r}
v <- 1:5
result <- sapply(v, function(num){num * 2})
result
```

# 2. Data Manipulation
```{r}

library("dplyr")


library(nycflights13)

head(flights)
```

```{r results='hide'}
summary(flights)

```

* `filter`
```{r}
filter(flights,month == "11", day == 3, carrier == "AA")
```

* `slice`
* helps to select the rows
```{r}
slice(flights,1:10)
```

* `arrange`
```{r}
head(arrange(flights,year,month,day,arr_time))
```

* `select`
```{r}
head(select(flights,carrier,arr_time,month))
```

* `rename`
```{r}
head(rename(flights,airline_carrier = carrier))
```

* `distinct`
*  removes those duplicates, leaving only the unique carriers
```{r}
distinct(select(flights,carrier))
```

* `mutate`
to new  column
```{r}
head(mutate(flights, new_col = arr_delay- dep_delay ))
```

* transmute 
just give the output of the new column
```{r}
head(transmute(flights, new_col = arr_delay- dep_delay ))
```

* `summarize`
```{r}
summarize(flights,avg_air_time = mean(air_time,na.rm = TRUE))

summarize(flights,total_air_time = sum(air_time,na.rm = TRUE))
```

```{r}

```

* `sample_n`
```{r}
sample_n(flights,10)
```

* `sample_frac`
```{r}
sample_frac(flights,0.1)
```

# 3. Pipe Operator
* useful to use multiple function 
```{r}
library(dplyr)
df <- mtcars
head(df)

#Nesting
# result <- arrange(sample_n(filter(df, mpg > 20), size = 5))

# Pipe Operaztror
# data %>% op1 %>%
result <- df %>% filter(mpg > 20) %>% sample_n(size = 5) %>% arrange(desc(mpg))
result


```

















